# Sudoku

## 一、概述

项目为C++/pyton代码实现了一个数独求解器，主要包含两个类：`Grid`类和`Sudoku`类。`Grid`类用于表示二维网格，提供了获取行、列、子网格以及显示网格等方法。`Sudoku`类继承自`Grid`类，专门用于解决数独问题。两个实现版本的思路类似，下面以C++代码为例子进行介绍。

## 二、类和方法介绍

### （一）`Grid`类

1. **构造函数**：接受盒子大小和网格大小作为参数，初始化网格并将所有元素初始化为 0。
   - `Grid(int boxSize, int gridSize)`：通过传入的参数设置类中的`BOX_SIZE`、`GRID_SIZE`和`GLOBAL_SIZE`，并动态分配二维数组`grid`。
2. **析构函数**：释放动态分配的内存。
   - `~Grid()`：遍历二维数组`grid`，先释放每个一维数组，再释放二维数组指针。
3. **获取行方法**：返回指定行的指针。
   - `int* getRow(int row)`：检查行号是否合法，若合法则返回指定行的指针。
4. **获取列方法**：返回指定列的指针。
   - `int* getColumn(int column)`：检查列号是否合法，若合法则创建一个新的一维数组，将指定列的元素复制到新数组中并返回。
5. **获取子网格方法**：返回指定子网格的指针。
   - `int** getBox(int col, int row)`：检查行列号是否合法，若合法则创建一个新的二维数组，将指定子网格的元素复制到新数组中并返回。
6. **显示网格方法**：显示整个网格。
   - `showGrid()`：遍历二维数组`grid`，按照特定格式输出网格中的元素。

### （二）`Sudoku`类

1. **构造函数**：接受一个字符串输入，表示数独的初始状态，检查长度是否为 81，然后将字符串转换为整数数组来初始化网格。
   - `Sudoku(const std::string input_)`：调用基类构造函数初始化网格大小，检查输入字符串长度，调用`transform`方法将字符串转换为整数数组，最后用整数数组初始化数独网格并显示。
2. **字符串转换方法**：将输入字符串转换为整数数组。
   - `int* transform(const std::string input_)`：创建一个与输入字符串长度相等的整数数组，遍历字符串将每个字符转换为数字并存入整数数组，最后返回整数数组指针。
3. **求解方法**：递归地尝试填充空单元格以求解数独。
   - `bool solver(int**& box)`：遍历二维数组，找到空单元格后尝试填入 1 到 9 的数字，通过调用`isValid`方法检查数字是否合法，若合法则继续递归求解，若找到解则返回`true`，否则回溯将当前单元格重置为 0 并返回`false`。
4. **有效性检查方法**：检查给定数字在网格中的特定位置是否有效。
   - `bool isValid(int**& board, int row, int col, int num)`：分别检查给定数字在指定行、列和子网格中是否已经存在，若都不存在则返回`true`，否则返回`false`。
5. **推断方法**：如果数独问题未解决，复制当前网格，调用`solver`方法，更新原始网格并显示结果；如果已解决，则直接显示结果。
   - `void inference()`：如果数独未解决，创建一个新的二维数组复制当前网格，调用`solver`方法求解，将求解后的结果复制回原始网格并设置已解决标志，最后显示网格；如果已解决则直接显示网格。

## 三、使用方法

1. 在`main`函数中，定义一个表示数独初始状态的输入字符串，该字符串应长度为 81，数字表示已知数字，0 表示空单元格。
   - `std::string input_ = "017903600000080000900000507072010430000402070064370250701000065000030000005601720";`
2. 创建一个`Sudoku`对象，将输入字符串传递给构造函数。
   - `Sudoku solver = Sudoku(input_);`
3. 调用`Sudoku`对象的`inference`方法来求解数独并显示结果。
   - `solver.inference();`
